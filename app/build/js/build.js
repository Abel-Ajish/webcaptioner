function clear_saved(){ga("send","event","user","clearButtonClick"),confirm("Clear saved transcript?")&&($("#final_span").text(""),final_transcript="",window.localStorage.setItem("transcript",final_transcript))}function upgrade(){showInfo("info_upgrade")}function linebreak(t){return t.replace(two_line,"<p></p>").replace(one_line,"<br>")}function capitalize(t){return t.replace(first_char,function(t){return t.toUpperCase()})}function startButton(t){if(recognizing)return ga("send","event","user","stopButtonClick"),recognition.stop(),void $("#startButton").text("Start");ga("send","event","user","startButtonClick"),$("#startButton").text("Stop"),recognition.lang="en-US",recognition.start(),ignore_onend=!1,interim_span.innerHTML="",showInfo("info_allow"),start_timestamp=t.timeStamp}function showInfo(t){if(t){for(var e=info.firstChild;e;e=e.nextSibling)e.style&&(e.style.display=e.id==t?"inline":"none");info.style.visibility="visible"}else info.style.visibility="hidden"}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}showInfo("info_start"),document.getElementById("final_span").innerHTML=window.localStorage.getItem("transcript"),window.scrollTo(0,document.body.scrollHeight);var create_email=!1,final_transcript=window.localStorage.getItem("transcript")||"",recognizing=!1,ignore_onend,start_timestamp,restartingDueToFailure=!1;if("webkitSpeechRecognition"in window){var recognition=new webkitSpeechRecognition;recognition.continuous=!0,recognition.interimResults=!0,recognition.onstart=function(){recognizing=!0,showInfo("info_speak_now"),window.scrollTo(0,document.body.scrollHeight)},recognition.onerror=function(t){"no-speech"==t.error&&(showInfo("info_no_speech"),ignore_onend=!0),"audio-capture"==t.error&&(showInfo("info_no_microphone"),ignore_onend=!0),"not-allowed"==t.error&&(showInfo(t.timeStamp-start_timestamp<100?"info_blocked":"info_denied"),ignore_onend=!0)},recognition.onend=function(){if(restartingDueToFailure)return console.log("Restarting due to failure"),ga("send","event","recognition","restartingDueToPossibleFailure"),recognition.start(),void(restartingDueToFailure=!1);recognizing=!1,ignore_onend||showInfo(final_transcript?"":"info_start")};var lastResultTime=(new Date).getTime()/1e3;recognition.onresult=function(t){lastResultTime=(new Date).getTime()/1e3;var e="";if(void 0===t.results)return recognition.onend=null,recognition.stop(),void upgrade();for(var n=t.resultIndex;n<t.results.length;++n)t.results[n].isFinal?final_transcript+=t.results[n][0].transcript:e+=t.results[n][0].transcript;final_transcript=capitalize(final_transcript),final_span.innerHTML=linebreak(final_transcript),interim_span.innerHTML=linebreak(e),window.localStorage.setItem("transcript",final_transcript),window.scrollTo(0,document.body.scrollHeight)}}else upgrade();setInterval(function(){var t=(new Date).getTime()/1e3;recognizing&&t-lastResultTime>3&&(restartingDueToFailure=!0,recognition.stop())},3e3);var two_line=/\n\n/g,one_line=/\n/g,first_char=/\S/;$(function(){$("#final_span").on("keyup",function(t){final_transcript=$("#final_span").text(),window.localStorage.setItem("transcript",final_transcript)})});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_createClass=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),Collapse=function(t){var e="collapse",n="bs.collapse",i=t.fn[e],r={toggle:!0,parent:""},o={toggle:"boolean",parent:"string"},a={SHOW:"show.bs.collapse",SHOWN:"shown.bs.collapse",HIDE:"hide.bs.collapse",HIDDEN:"hidden.bs.collapse",CLICK_DATA_API:"click.bs.collapse.data-api"},s={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},l={WIDTH:"width",HEIGHT:"height"},c={ACTIVES:".card > .show, .card > .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},g=function(){function i(e,n){_classCallCheck(this,i),this._isTransitioning=!1,this._element=e,this._config=this._getConfig(n),this._triggerArray=t.makeArray(t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]')),this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}return i.prototype.toggle=function(){t(this._element).hasClass(s.SHOW)?this.hide():this.show()},i.prototype.show=function(){var e=this;if(this._isTransitioning)throw new Error("Collapse is transitioning");if(!t(this._element).hasClass(s.SHOW)){var r=void 0,o=void 0;if(this._parent&&((r=t.makeArray(t(this._parent).find(c.ACTIVES))).length||(r=null)),!(r&&(o=t(r).data(n))&&o._isTransitioning)){var l=t.Event(a.SHOW);if(t(this._element).trigger(l),!l.isDefaultPrevented()){r&&(i._jQueryInterface.call(t(r),"hide"),o||t(r).data(n,null));var g=this._getDimension();t(this._element).removeClass(s.COLLAPSE).addClass(s.COLLAPSING),this._element.style[g]=0,this._element.setAttribute("aria-expanded",!0),this._triggerArray.length&&t(this._triggerArray).removeClass(s.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var u=function(){t(e._element).removeClass(s.COLLAPSING).addClass(s.COLLAPSE).addClass(s.SHOW),e._element.style[g]="",e.setTransitioning(!1),t(e._element).trigger(a.SHOWN)};if(Util.supportsTransitionEnd()){var f="scroll"+(g[0].toUpperCase()+g.slice(1));t(this._element).one(Util.TRANSITION_END,u).emulateTransitionEnd(600),this._element.style[g]=this._element[f]+"px"}else u()}}}},i.prototype.hide=function(){var e=this;if(this._isTransitioning)throw new Error("Collapse is transitioning");if(t(this._element).hasClass(s.SHOW)){var n=t.Event(a.HIDE);if(t(this._element).trigger(n),!n.isDefaultPrevented()){var i=this._getDimension(),r=i===l.WIDTH?"offsetWidth":"offsetHeight";this._element.style[i]=this._element[r]+"px",Util.reflow(this._element),t(this._element).addClass(s.COLLAPSING).removeClass(s.COLLAPSE).removeClass(s.SHOW),this._element.setAttribute("aria-expanded",!1),this._triggerArray.length&&t(this._triggerArray).addClass(s.COLLAPSED).attr("aria-expanded",!1),this.setTransitioning(!0);var o=function(){e.setTransitioning(!1),t(e._element).removeClass(s.COLLAPSING).addClass(s.COLLAPSE).trigger(a.HIDDEN)};this._element.style[i]="",Util.supportsTransitionEnd()?t(this._element).one(Util.TRANSITION_END,o).emulateTransitionEnd(600):o()}}},i.prototype.setTransitioning=function(t){this._isTransitioning=t},i.prototype.dispose=function(){t.removeData(this._element,n),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},i.prototype._getConfig=function(n){return n=t.extend({},r,n),n.toggle=Boolean(n.toggle),Util.typeCheckConfig(e,n,o),n},i.prototype._getDimension=function(){return t(this._element).hasClass(l.WIDTH)?l.WIDTH:l.HEIGHT},i.prototype._getParent=function(){var e=this,n=t(this._config.parent)[0],r='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return t(n).find(r).each(function(t,n){e._addAriaAndCollapsedClass(i._getTargetFromElement(n),[n])}),n},i.prototype._addAriaAndCollapsedClass=function(e,n){if(e){var i=t(e).hasClass(s.SHOW);e.setAttribute("aria-expanded",i),n.length&&t(n).toggleClass(s.COLLAPSED,!i).attr("aria-expanded",i)}},i._getTargetFromElement=function(e){var n=Util.getSelectorFromElement(e);return n?t(n)[0]:null},i._jQueryInterface=function(e){return this.each(function(){var o=t(this),a=o.data(n),s=t.extend({},r,o.data(),"object"===(void 0===e?"undefined":_typeof(e))&&e);if(!a&&s.toggle&&/show|hide/.test(e)&&(s.toggle=!1),a||(a=new i(this,s),o.data(n,a)),"string"==typeof e){if(void 0===a[e])throw new Error('No method named "'+e+'"');a[e]()}})},_createClass(i,null,[{key:"VERSION",get:function(){return"4.0.0-alpha.6"}},{key:"Default",get:function(){return r}}]),i}();return t(document).on(a.CLICK_DATA_API,c.DATA_TOGGLE,function(e){e.preventDefault();var i=g._getTargetFromElement(this),r=t(i).data(n)?"toggle":t(this).data();g._jQueryInterface.call(t(i),r)}),t.fn[e]=g._jQueryInterface,t.fn[e].Constructor=g,t.fn[e].noConflict=function(){return t.fn[e]=i,g._jQueryInterface},g}(jQuery),Util=function(t){function e(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function n(t){return(t[0]||t).nodeType}function i(){return{bindType:a.end,delegateType:a.end,handle:function(e){if(t(e.target).is(this))return e.handleObj.handler.apply(this,arguments)}}}function r(){if(window.QUnit)return!1;var t=document.createElement("bootstrap");for(var e in s)if(void 0!==t.style[e])return{end:s[e]};return!1}function o(e){var n=this,i=!1;return t(this).one(l.TRANSITION_END,function(){i=!0}),setTimeout(function(){i||l.triggerTransitionEnd(n)},e),this}var a=!1,s={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},l={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do{t+=~~(1e6*Math.random())}while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");return e||(e=t.getAttribute("href")||"",e=/^#[a-z]/i.test(e)?e:null),e},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(e){t(e).trigger(a.end)},supportsTransitionEnd:function(){return Boolean(a)},typeCheckConfig:function(t,i,r){for(var o in r)if(r.hasOwnProperty(o)){var a=r[o],s=i[o],l=s&&n(s)?"element":e(s);if(!new RegExp(a).test(l))throw new Error(t.toUpperCase()+': Option "'+o+'" provided type "'+l+'" but expected type "'+a+'".')}}};return a=r(),t.fn.emulateTransitionEnd=o,l.supportsTransitionEnd()&&(t.event.special[l.TRANSITION_END]=i()),l}(jQuery);